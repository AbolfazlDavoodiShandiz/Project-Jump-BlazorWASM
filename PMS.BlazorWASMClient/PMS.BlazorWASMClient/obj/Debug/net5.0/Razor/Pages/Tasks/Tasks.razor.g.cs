#pragma checksum "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\Pages\Tasks\Tasks.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "21de88b0a006f86c95fa2fc5a34821569d983323"
// <auto-generated/>
#pragma warning disable 1591
namespace PMS.BlazorWASMClient.Pages.Tasks
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\_Imports.razor"
using System.Net.Http.Json;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\_Imports.razor"
using Microsoft.AspNetCore.Components.Web.Virtualization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\_Imports.razor"
using Microsoft.AspNetCore.Components.WebAssembly.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\_Imports.razor"
using PMS.BlazorWASMClient;

#line default
#line hidden
#nullable disable
#nullable restore
#line 12 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\_Imports.razor"
using PMS.BlazorWASMClient.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 13 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\_Imports.razor"
using PMS.BlazorWASMClient.Utility.Services;

#line default
#line hidden
#nullable disable
#nullable restore
#line 14 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\_Imports.razor"
using PMS.BlazorWASMClient.Utility.DTOs;

#line default
#line hidden
#nullable disable
#nullable restore
#line 15 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\_Imports.razor"
using PMS.BlazorWASMClient.Utility.Extensions;

#line default
#line hidden
#nullable disable
#nullable restore
#line 16 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\_Imports.razor"
using PMS.BlazorWASMClient.Utility.Enums;

#line default
#line hidden
#nullable disable
#nullable restore
#line 17 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\_Imports.razor"
using PMS.BlazorWASMClient.Utility.Notifications;

#line default
#line hidden
#nullable disable
#nullable restore
#line 18 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\_Imports.razor"
using Blazored.Typeahead;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\Pages\Tasks\Tasks.razor"
           [Authorize]

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.RouteAttribute("/tasks")]
    public partial class Tasks : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.OpenElement(0, "div");
            __builder.AddAttribute(1, "class", "row mb-2");
            __builder.OpenElement(2, "h3");
            __builder.AddContent(3, "Tasks assigned to ");
            __builder.AddContent(4, 
#nullable restore
#line 9 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\Pages\Tasks\Tasks.razor"
                           Username

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(5, "\r\n\r\n");
            __builder.OpenElement(6, "div");
            __builder.AddAttribute(7, "class", "row mb-2");
            __builder.OpenElement(8, "div");
            __builder.AddAttribute(9, "class", "col");
            __builder.OpenElement(10, "table");
            __builder.AddAttribute(11, "class", "table");
            __builder.AddMarkupContent(12, @"<thead><tr><th>#</th>
                    <th>Status</th>
                    <th>Title</th>
                    <th>Project Name</th>
                    <th>Created By</th>
                    <th>Created Date</th>
                    <th>Deadline Date</th>
                    <th>Complete Date</th>
                    <th></th></tr></thead>
            ");
            __builder.OpenElement(13, "tbody");
#nullable restore
#line 29 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\Pages\Tasks\Tasks.razor"
                 for (int index = 0; index < TaskList.Count(); index++)
                {
                    int itemIndex = index;
                    int taskId = TaskList[itemIndex].Id;
                    string statusText = string.Empty;
                    string statusClass = string.Empty;
                    bool isDone = TaskList[itemIndex].Done;

                    

#line default
#line hidden
#nullable disable
#nullable restore
#line 37 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\Pages\Tasks\Tasks.razor"
                     if (isDone)
                    {
                        statusText = "Finished";
                        statusClass = "badge bg-success";

                        if (TaskList[itemIndex].CompleteDate.HasValue && TaskList[itemIndex].CompleteDate.Value.Date >= TaskList[itemIndex].DeadlineDate.Date)
                        {
                            statusText = "Finished After Deadline";
                            statusClass = "badge bg-danger";
                        }
                    }
                    else
                    {
                        statusText = "In Progress";
                        statusClass = "badge bg-warning text-dark";

                        if (DateTime.Now.Date >= TaskList[itemIndex].DeadlineDate.Date)
                        {
                            statusText = "Deadline Reached";
                            statusClass = "badge bg-danger";
                        }
                    }

#line default
#line hidden
#nullable disable
            __builder.OpenElement(14, "tr");
            __builder.OpenElement(15, "td");
            __builder.AddContent(16, 
#nullable restore
#line 61 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\Pages\Tasks\Tasks.razor"
                              ((CurrentPage - 1) * PageSize) + itemIndex + 1

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(17, "\r\n                        ");
            __builder.OpenElement(18, "td");
            __builder.OpenElement(19, "span");
            __builder.AddAttribute(20, "class", 
#nullable restore
#line 62 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\Pages\Tasks\Tasks.razor"
                                           statusClass

#line default
#line hidden
#nullable disable
            );
            __builder.AddContent(21, 
#nullable restore
#line 62 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\Pages\Tasks\Tasks.razor"
                                                          statusText

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(22, "\r\n                        ");
            __builder.OpenElement(23, "td");
            __builder.OpenElement(24, "a");
            __builder.AddAttribute(25, "style", "text-decoration:none;");
            __builder.AddAttribute(26, "href", "#");
            __builder.AddContent(27, 
#nullable restore
#line 63 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\Pages\Tasks\Tasks.razor"
                                                                        TaskList[itemIndex].Title

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(28, "\r\n                        ");
            __builder.OpenElement(29, "td");
            __builder.AddContent(30, 
#nullable restore
#line 64 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\Pages\Tasks\Tasks.razor"
                             TaskList[itemIndex].ProjectTitle

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(31, "\r\n                        ");
            __builder.OpenElement(32, "td");
            __builder.AddContent(33, 
#nullable restore
#line 65 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\Pages\Tasks\Tasks.razor"
                             TaskList[itemIndex].OwnerUsername

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(34, "\r\n                        ");
            __builder.OpenElement(35, "td");
            __builder.AddAttribute(36, "data-toggle", "tooltip");
            __builder.AddAttribute(37, "data-placement", "top");
            __builder.AddAttribute(38, "title", 
#nullable restore
#line 66 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\Pages\Tasks\Tasks.razor"
                                                                                TaskList[itemIndex].CreatedDate

#line default
#line hidden
#nullable disable
            );
            __builder.AddContent(39, 
#nullable restore
#line 66 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\Pages\Tasks\Tasks.razor"
                                                                                                                   TaskList[itemIndex].CreatedDate.ToShortDateString()

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(40, "\r\n                        ");
            __builder.OpenElement(41, "td");
            __builder.AddContent(42, 
#nullable restore
#line 67 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\Pages\Tasks\Tasks.razor"
                             TaskList[itemIndex].DeadlineDate.ToShortDateString()

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(43, "\r\n                        ");
            __builder.OpenElement(44, "td");
            __builder.AddAttribute(45, "data-toggle", "tooltip");
            __builder.AddAttribute(46, "data-placement", "top");
            __builder.AddAttribute(47, "title", 
#nullable restore
#line 68 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\Pages\Tasks\Tasks.razor"
                                                                                TaskList[itemIndex].CompleteDate

#line default
#line hidden
#nullable disable
            );
            __builder.AddContent(48, 
#nullable restore
#line 68 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\Pages\Tasks\Tasks.razor"
                                                                                                                    TaskList[itemIndex].CompleteDate?.ToShortDateString()

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(49, "\r\n                        ");
            __builder.OpenElement(50, "td");
            __builder.OpenElement(51, "button");
            __builder.AddAttribute(52, "class", "btn btn-sm btn-secondary");
            __builder.AddAttribute(53, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 70 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\Pages\Tasks\Tasks.razor"
                                                                               ()=>ShowAssignedUsersModal(true,taskId)

#line default
#line hidden
#nullable disable
            ));
            __builder.AddContent(54, "Assigned Users");
            __builder.CloseElement();
            __builder.AddMarkupContent(55, "\r\n                            ");
            __builder.OpenElement(56, "button");
            __builder.AddAttribute(57, "class", "btn btn-sm btn-success");
            __builder.AddAttribute(58, "disabled", 
#nullable restore
#line 71 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\Pages\Tasks\Tasks.razor"
                                                                               isDone

#line default
#line hidden
#nullable disable
            );
            __builder.AddAttribute(59, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 71 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\Pages\Tasks\Tasks.razor"
                                                                                                  ()=>MarkAsDone(TaskList[itemIndex])

#line default
#line hidden
#nullable disable
            ));
            __builder.AddContent(60, "Done");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 74 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\Pages\Tasks\Tasks.razor"
                }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(61, "\r\n        ");
            __builder.OpenComponent<PMS.BlazorWASMClient.Shared.Pagination>(62);
            __builder.AddAttribute(63, "ItemCount", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Int32>(
#nullable restore
#line 77 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\Pages\Tasks\Tasks.razor"
                                                 ItemCount

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(64, "PageSize", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Int32>(
#nullable restore
#line 77 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\Pages\Tasks\Tasks.razor"
                                                                      PageSize

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(65, "CurrentPage", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Int32>(
#nullable restore
#line 77 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\Pages\Tasks\Tasks.razor"
                                                                                             CurrentPage

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(66, "OnPageChanged", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<System.Int32>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<System.Int32>(this, 
#nullable restore
#line 77 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\Pages\Tasks\Tasks.razor"
                                                                                                                         OnPageChanged

#line default
#line hidden
#nullable disable
            )));
            __builder.AddComponentReferenceCapture(67, (__value) => {
#nullable restore
#line 77 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\Pages\Tasks\Tasks.razor"
                          Pagination = (PMS.BlazorWASMClient.Shared.Pagination)__value;

#line default
#line hidden
#nullable disable
            }
            );
            __builder.CloseComponent();
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 81 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\Pages\Tasks\Tasks.razor"
 if (AssignedUsersModalVisible)
{

#line default
#line hidden
#nullable disable
            __builder.OpenElement(68, "div");
            __builder.AddAttribute(69, "class", "modal fade show");
            __builder.AddAttribute(70, "id", "add-member-modal");
            __builder.AddAttribute(71, "data-bs-backdrop", "static");
            __builder.AddAttribute(72, "data-bs-keyboard", "false");
            __builder.AddAttribute(73, "tabindex", "-1");
            __builder.AddAttribute(74, "aria-labelledby", "add-member-modal-label");
            __builder.AddAttribute(75, "aria-modal", "true");
            __builder.AddAttribute(76, "role", "dialog");
            __builder.AddAttribute(77, "style", "display:block;");
            __builder.OpenElement(78, "div");
            __builder.AddAttribute(79, "class", "modal-dialog");
            __builder.OpenElement(80, "div");
            __builder.AddAttribute(81, "class", "modal-content");
            __builder.OpenElement(82, "div");
            __builder.AddAttribute(83, "class", "modal-header");
            __builder.AddMarkupContent(84, "<h5 class=\"modal-title\" id=\"create-task-modal-header-label\">Assign Task To User</h5>\r\n                    ");
            __builder.OpenElement(85, "button");
            __builder.AddAttribute(86, "type", "button");
            __builder.AddAttribute(87, "class", "btn-close");
            __builder.AddAttribute(88, "data-bs-dismiss", "modal");
            __builder.AddAttribute(89, "aria-label", "Close");
            __builder.AddAttribute(90, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 90 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\Pages\Tasks\Tasks.razor"
                                                                                                                 ()=>ShowAssignedUsersModal(false)

#line default
#line hidden
#nullable disable
            ));
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(91, "\r\n                ");
            __builder.OpenElement(92, "div");
            __builder.AddAttribute(93, "class", "modal-body");
            __builder.OpenElement(94, "div");
            __builder.AddAttribute(95, "class", "row mt-2");
            __builder.OpenElement(96, "div");
            __builder.AddAttribute(97, "class", "col");
#nullable restore
#line 95 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\Pages\Tasks\Tasks.razor"
                             for (int index = 0; index < AssignedUsers.Count; index++)
                            {
                                int itemIndex = index;


#line default
#line hidden
#nullable disable
            __builder.OpenElement(98, "div");
            __builder.AddAttribute(99, "class", "mt-1");
            __builder.OpenElement(100, "label");
            __builder.OpenElement(101, "strong");
            __builder.AddContent(102, 
#nullable restore
#line 101 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\Pages\Tasks\Tasks.razor"
                                                 AssignedUsers[itemIndex]

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 104 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\Pages\Tasks\Tasks.razor"
                            }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(103, "\r\n                ");
            __builder.OpenElement(104, "div");
            __builder.AddAttribute(105, "class", "modal-footer");
            __builder.OpenElement(106, "button");
            __builder.AddAttribute(107, "type", "button");
            __builder.AddAttribute(108, "class", "btn btn-secondary");
            __builder.AddAttribute(109, "data-bs-dismiss", "modal");
            __builder.AddAttribute(110, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 109 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\Pages\Tasks\Tasks.razor"
                                                                                                      ()=>ShowAssignedUsersModal(false)

#line default
#line hidden
#nullable disable
            ));
            __builder.AddContent(111, "Close");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 114 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\Pages\Tasks\Tasks.razor"
}

#line default
#line hidden
#nullable disable
        }
        #pragma warning restore 1998
#nullable restore
#line 116 "D:\Programming\Projects\GitHubRepositories\Project-Jump-BlazorWASM\PMS.BlazorWASMClient\PMS.BlazorWASMClient\Pages\Tasks\Tasks.razor"
      
    [CascadingParameter]
    Task<AuthenticationState> AuthenticationState { get; set; }
    string Username { get; set; }
    int UserId { get; set; }

    Pagination Pagination;
    int ItemCount { get; set; }
    int PageSize { get; set; } = 15;
    int CurrentPage { get; set; }

    List<ProjectTaskDTO> PureTaskList = new List<ProjectTaskDTO>();
    List<ProjectTaskDTO> TaskList
    {
        get
        {
            return FilteredTable()
                .OrderByDescending(t => t.CreatedDate)
                .ToList();
        }
    }

    bool AssignedUsersModalVisible = false;
    int SelectedTaskId { get; set; }
    List<string> AssignedUsers = new List<string>();

    protected override async Task OnInitializedAsync()
    {
        var authState = await AuthenticationState;
        if (authState.User.Identity.IsAuthenticated)
        {
            Username = authState.User.Identity.GetUsername();
            UserId = authState.User.Identity.GetUserId();

            await GetTasks();
        }
    }

    private async Task GetTasks()
    {
        var tasks = await projectTaskService.GetUserTasks();

        if (tasks.IsSuccess)
        {
            PureTaskList = tasks.Data.ToList();
            ItemCount = PureTaskList.Count;
            CurrentPage = 1;
        }
    }

    private List<ProjectTaskDTO> FilteredTable()
    {
        List<ProjectTaskDTO> list = new List<ProjectTaskDTO>();

        list = PaginateTable(GroupedTable(PureTaskList));

        return list;
    }

    private List<ProjectTaskDTO> GroupedTable(List<ProjectTaskDTO> pureList)
    {
        List<ProjectTaskDTO> list = new List<ProjectTaskDTO>();

        list = pureList;

        ItemCount = list.Count;

        return list;
    }

    private List<ProjectTaskDTO> PaginateTable(List<ProjectTaskDTO> pureList)
    {
        List<ProjectTaskDTO> list = new List<ProjectTaskDTO>();

        list = pureList.Skip(PageSize * (CurrentPage - 1)).Take(PageSize).ToList();

        return list;
    }

    private void OnPageChanged(int page)
    {
        CurrentPage = page;
    }

    private async Task MarkAsDone(ProjectTaskDTO projectTaskDTO)
    {
        var result = await projectTaskService.MarkAsDone(projectTaskDTO.Id);

        string messageType = result.IsSuccess ? "success" : "error";

        await jsRuntime.ShowToastr(messageType, result.Message);

        if (result.IsSuccess)
        {
            var item = PureTaskList.Where(t => t.Id == projectTaskDTO.Id).Single();

            item.Done = true;
            item.CompleteDate = DateTime.Now;
        }
    }

    private async Task ShowAssignedUsersModal(bool show, int? taskId = null)
    {
        if (show)
        {
            if (taskId is not null)
            {
                SelectedTaskId = taskId.Value;

                var response = await projectTaskService.GetTaskAssignedUsers(SelectedTaskId);

                if (response.IsSuccess)
                {
                    AssignedUsers = response.Data.ToList();
                }
            }
        }
        else
        {
            SelectedTaskId = 0;
        }

        AssignedUsersModalVisible = show;
    }

#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IJSRuntime jsRuntime { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IProjectTaskService projectTaskService { get; set; }
    }
}
#pragma warning restore 1591
